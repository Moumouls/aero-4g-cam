name: Generate Video

on:
  workflow_dispatch:
  pull_request:
    types: [opened, synchronize]

jobs:
  attempt-1:
    name: Generate Video (Attempt 1)
    uses: ./.github/workflows/generate-video-job.yml
    secrets: inherit

  attempt-2:
    name: Generate Video (Attempt 2)
    needs: attempt-1
    if: failure()
    uses: ./.github/workflows/generate-video-job.yml
    secrets: inherit

  attempt-3:
    name: Generate Video (Attempt 3 - Final)
    needs: attempt-2
    if: failure()
    uses: ./.github/workflows/generate-video-job.yml
    secrets: inherit
